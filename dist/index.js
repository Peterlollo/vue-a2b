!function(a,b){typeof exports==='object'&&typeof module!=='undefined'?module.exports=b():typeof define==='function'&&define.amd?define(b):(a.vueSplitter=b())}(this,(function(){'use strict';function c(a,b){return b?c(b,a%b):a}function d(a){return a.reduce(function(a,b){return c(a,b)})}function e(a){var b=[],c=[];a.forEach(function(a){if(a.data&&a.data.slot){var d=a.data.attrs?a.data.attrs.chance:NaN,e=parseInt(d)||1;b.push(a.data.slot);c.push(e)}});var e=d(c);return b.reduce(function(a,b,d){var f=Math.round(c[d]/e);for(var g=0;g<f;g++)a.push(b);return a},[])}function f(a){var b=Math.round(Math.random()*a.length);return a[b]}function g(a){var b=e(a);return f(b)}function j(a){return a*24*3600*1000}function k(a){var b=document.cookie.split(';'),c=a.length;for(var d in b){var e=b[d].trim();if(e.substr(0,c)===a){var f=decodeURIComponent(e.slice(c+1));return JSON.parse(f)}}}function l(a,b,c){var d=new Date();d.setTime(d.getTime()+j(c));var e="expires="+(d.toUTCString())+";path=/";b=encodeURIComponent(JSON.stringify(b));document.cookie=a+"="+b+";"+e}function m(a,b){var c=new Date();c.setTime(c.getTime()+j(b));var d=JSON.parse(localStorage.getItem(a));return d&&d.expires>c.getTime()?d:null}function n(a,b,c){b.expiry=new Date().getTime()+j(c);localStorage.setItem(a,JSON.stringify(b))}var o={_store:null,name:'split-test',method:'cookie',expiry:30,_load:function a(){this.method==='cookie'?(this._store=k(this.name)||{}):this.method==='localStorage'?(this._store=m(this.name,this.expiry)||{}):(console.warn("VueA2B WARNING: No or invalid storage method. Data will not persist."),this._store={});return this._store},_save:function a(){this.method==='cookie'?l(this.name,this._store,this.expiry):this.method==='localStorage'&&n(this.name,this._store,this.expiry)},get entry () {return this._store||this._load()},set entry (a){var b=a.name,c=a.winner;this._store[b]=c;this._save()}},p={install:function c(a,b){b===void 0&&(b={});if(b.storage){var d=b.storage;d.name&&(o.name=d.name);d.method&&(o.method=d.method);d.expiry&&(o.expiry=parseInt(expiry))}a.component(b.component||'split-test',{functional:!0,props:{always:String,name:String},render:function c(a,b){var d=b.props.name||b.parent.$options.name;if(!d){throw 'VueA2B Error: The test name is mandatory!'}var e=b.slots(),f=o.entry[d]||b.props.always||g(b.children);o.entry={name:d,winner:f};return e[f]}})}};return p}))
//# sourceMappingURL=index.js.map
